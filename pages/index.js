import Head from 'next/head';
import clientPromise from '../lib/mongodb';
import AboutLayout from '../components/aboutLayout/aboutLayout';
import BrandsLayout from '../components/brandsLayout/brandsLayout';
import FooterLayout from '../components/footerLayout/footerLayout';
import LandingLayout from '../components/landingLayout/landingLayout';
import TitleBarLayout from '../components/titleBarLayout/titleBarLayout';
import NewsletterLayout from '../components/newsletterLayout/newsletterLayout';
import OurServicesLayout from '../components/ourServicesLayout/ourServicesLayout';
import HungryBannerLayout from '../components/hungryBannerLayout/hungryBannerLayout';

const Home = ({posts}) => {
  return (
    <div>
      <Head>
        <title>OneHowl</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>
      <TitleBarLayout boxShadow={"none"}/>
      <LandingLayout />
      <AboutLayout />
      <HungryBannerLayout />
      <BrandsLayout brandsData={posts}/>
      <OurServicesLayout />
      <NewsletterLayout />
      <FooterLayout />
    </div>
  )
}

export const getStaticProps = async () => {
  const client = await clientPromise;
  const database = client.db(process.env.MONGO_DB);
  const brandsCollection = database.collection("brandsCollection");
  const result = await brandsCollection.find({}).toArray();
  return {
    props: {
      posts: result
    }
  }
}


export default Home;


