import Head from 'next/head';
import clientPromise from '../lib/mongodb';
import Layout from '../components/layout/layout';
import LandingLayout from "../components/landingLayout/landingLayout";
import ProductsLayout from '../components/Products/productsLayout/productsLayout';
import CheckoutFooterLayout from '../components/checkoutFooterLayout/checkoutFooterLayout';
import FeaturedCategoriesLayout from '../components/featuredCategoriesLayout/featuredCategoiresLayout';

const Home = ({posts}) => {
  return (
    <Layout boxShadow={"none"} brandsData={posts}>
      <Head>
        <title>OneHowl</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>
      <LandingLayout />
      <FeaturedCategoriesLayout data={posts} />
      <ProductsLayout data={posts} />
      <CheckoutFooterLayout />
    </Layout>
  )
}

export const getStaticProps = async () => {
  const client = await clientPromise;
  const database = client.db(process.env.MONGO_DB);
  const productCollection = database.collection("productCollection");
  const result = await productCollection.find({}).toArray();
  return {
    props: {
      posts: result
    }
  }
}


export default Home;


